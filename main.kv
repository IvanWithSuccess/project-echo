
# =========================================================================
# >> CUSTOM WIDGET DEFINITIONS
# =========================================================================

<NavButton>:
    # This is a clickable layout, defined as a class in main.py
    orientation: 'vertical'
    size_hint: None, None
    size: dp(80), dp(72)
    # FIX: Remove horizontal padding to allow children to center across the full width
    padding: [0, dp(12), 0, dp(8)]
    spacing: dp(4)

    # FIX: Add a canvas to make the whole widget area touch-sensitive for clicks.
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0 # Transparent background
        Rectangle:
            pos: self.pos
            size: self.size

    # FIX: Icon and Label are now direct children, centered correctly.
    MDIcon:
        id: icon
        icon: root.icon
        halign: 'center'
        font_size: dp(24)
        size_hint_x: 1  # Take full width to allow horizontal centering

    MDLabel:
        text: root.text
        halign: 'center'
        font_style: "Caption"
        font_size: "10sp"
        adaptive_height: True
        size_hint_x: 1  # Take full width to allow horizontal centering

# =========================================================================
# >> MAIN LAYOUT KV
# ==========================================================================

MDBoxLayout:
    orientation: 'horizontal'

    MDBoxLayout:
        orientation: 'vertical'
        size_hint_x: None
        width: dp(80)
        md_bg_color: self.theme_cls.bg_light
        padding: [dp(4), dp(16), dp(4), 0]
        spacing: dp(16)

        MDLabel:
            text: "Echo"
            font_style: "H6"
            halign: "center"
            adaptive_height: True

        MDBoxLayout:
            id: nav_list
            orientation: 'vertical'
            adaptive_height: True
            spacing: dp(8)

        Widget:
            size_hint_y: 1

    MDSeparator:
        orientation: 'vertical'

    MDScreenManager:
        id: screen_manager
