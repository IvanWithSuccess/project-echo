
# =========================================================================
# >> CUSTOM WIDGET DEFINITIONS
# =========================================================================

# FIX: Redefined NavButton as a layout that behaves like a button.
# It is no longer based on a pre-existing button class.
<NavButton>:
    orientation: 'vertical'
    size_hint: None, None
    size: dp(80), dp(72)
    padding: [dp(8), dp(12), dp(8), dp(8)]
    spacing: dp(4)

    # The container for the icon, ensuring it's centered.
    MDBoxLayout:
        adaptive_height: True
        padding: [0, 0, 0, dp(4)]
        MDIcon:
            id: icon
            icon: root.icon
            halign: 'center'
            font_size: dp(24)

    MDLabel:
        text: root.text
        halign: 'center'
        # FIX: Explicitly set a much smaller font size.
        font_style: "Caption"
        font_size: "10sp"
        adaptive_height: True

# =========================================================================
# >> MAIN LAYOUT KV
# ==========================================================================

MDBoxLayout:
    orientation: 'horizontal'

    MDBoxLayout:
        orientation: 'vertical'
        size_hint_x: None
        width: dp(80)
        md_bg_color: self.theme_cls.bg_light
        padding: [dp(4), dp(16), dp(4), 0]
        spacing: dp(16)

        MDLabel:
            text: "Echo"
            font_style: "H6"
            halign: "center"
            adaptive_height: True

        MDBoxLayout:
            id: nav_list
            orientation: 'vertical'
            adaptive_height: True
            spacing: dp(8)

        Widget:
            size_hint_y: 1

    MDSeparator:
        orientation: 'vertical'

    MDScreenManager:
        id: screen_manager
