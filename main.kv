
# =========================================================================
# >> CUSTOM WIDGET DEFINITIONS
# =========================================================================

<NavButton>:
    # This is a clickable layout, defined as a class in main.py
    orientation: 'vertical'
    size_hint: None, None
    size: dp(80), dp(72)
    padding: [0, dp(12), 0, dp(8)]
    spacing: dp(4)

    # This canvas makes the entire widget area sensitive to clicks.
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0 # Transparent background
        Rectangle:
            pos: self.pos
            size: self.size

    # FIX: Use pos_hint for a more robust centering method.
    MDIcon:
        id: icon
        icon: root.icon
        pos_hint: {'center_x': 0.5}
        font_size: dp(24)
        adaptive_size: True # Shrink to content size before centering

    MDLabel:
        text: root.text
        pos_hint: {'center_x': 0.5}
        font_style: "Caption"
        font_size: "10sp"
        adaptive_size: True # Shrink to content size before centering

# =========================================================================
# >> MAIN LAYOUT KV
# ==========================================================================

MDBoxLayout:
    orientation: 'horizontal'

    MDBoxLayout:
        orientation: 'vertical'
        size_hint_x: None
        width: dp(80)
        md_bg_color: self.theme_cls.bg_light
        padding: [dp(4), dp(16), dp(4), 0]
        spacing: dp(16)

        MDLabel:
            text: "Echo"
            font_style: "H6"
            halign: "center"
            adaptive_height: True

        MDBoxLayout:
            id: nav_list
            orientation: 'vertical'
            adaptive_height: True
            spacing: dp(8)

        Widget:
            size_hint_y: 1

    MDSeparator:
        orientation: 'vertical'

    MDScreenManager:
        id: screen_manager
