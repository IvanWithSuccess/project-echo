<LoginScreen>:

    MDBoxLayout:
        orientation: 'vertical'
        padding: [dp(20), dp(50), dp(20), dp(50)]
        spacing: dp(30)

        MDLabel:
            text: "Sign in to Project Echo"
            halign: 'center'
            # FIX: Changed font_style to a valid value for KivyMD 1.2.0
            font_style: 'H5'
            adaptive_height: True

        MDBoxLayout:
            orientation: 'vertical'
            spacing: dp(20)
            adaptive_height: True

            MDTextField:
                id: country_field
                hint_text: "Country"
                readonly: True
                on_focus: if self.focus: root.open_country_dialog()

            MDTextField:
                id: phone_field
                hint_text: "Phone Number"
                helper_text: "Include your country code (e.g., +1)"
                helper_text_mode: "on_focus"

        MDBoxLayout:
            orientation: 'vertical'
            adaptive_height: True
            spacing: dp(10)

            MDRaisedButton:
                text: "NEXT"
                on_release: root.on_next_button_press()
                md_bg_color: app.theme_cls.primary_color
                pos_hint: {'center_x': 0.5}

            MDSpinner:
                id: spinner
                size_hint: None, None
                size: dp(46), dp(46)
                pos_hint: {'center_x': 0.5}
                active: False

# ==============================================================================
# >> COUNTRY DIALOG WITH SEARCH AND RECYCLEVIEW
# ==============================================================================
<CountryListItem>:
    on_release: root.select_country(self)

<CountryDialogContent@MDBoxLayout>:
    orientation: "vertical"
    spacing: dp(10)
    padding: dp(10)

    MDTextField:
        id: search_field
        hint_text: "Search for a country..."
        on_text: root.filter_countries(self.text)

    RecycleView:
        id: rv
        key_viewclass: 'viewclass'
        key_size: 'height'

        RecycleBoxLayout:
            default_size: None, dp(56)
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: 'vertical'
