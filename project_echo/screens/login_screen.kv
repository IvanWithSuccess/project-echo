<LoginScreen>:
    name: "login_screen"

    # FIX: Use MDFloatLayout as the root to overlay widgets
    MDFloatLayout:

        # 1. The back arrow, positioned at the top-left
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"top": 0.98, "x": 0.02}
            on_release: app.root.ids.screen_manager.current = 'accounts'

        # 2. The centered content block
        MDAnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'

            MDBoxLayout:
                orientation: 'vertical'
                size_hint: None, None
                adaptive_height: True
                width: "500dp"
                spacing: "20dp"

                MDLabel:
                    text: "Sign in to Telegram"
                    halign: 'center'
                    font_style: 'H4'
                    adaptive_height: True

                MDLabel:
                    text: "Choose your country and enter your phone number."
                    halign: 'center'
                    adaptive_height: True
                    theme_text_color: "Secondary"

                MDTextField:
                    id: country_field
                    hint_text: "Country"
                    readonly: True
                    on_focus: if self.focus: root.open_country_dialog()

                MDTextField:
                    id: phone_field
                    hint_text: "Phone Number"
                    helper_text: "Include your country code (e.g., +1 for USA)"
                    helper_text_mode: "on_focus"

                MDRaisedButton:
                    text: "NEXT"
                    pos_hint: {'center_x': 0.5}
                    on_release: root.on_next_button_press()

        # 3. The spinner, also overlaid
        MDSpinner:
            id: spinner
            size_hint: None, None
            size: dp(46), dp(46)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            active: False
