<PasswordVerificationScreen>:
    name: "password_verification_screen"

    # FIX: Use MDAnchorLayout to properly center the content
    MDAnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'

        MDBoxLayout:
            orientation: 'vertical'
            size_hint: None, None # Let the content decide its size
            adaptive_height: True
            width: "500dp"
            spacing: "20dp"

            # FIX: Added a top layout to hold the back arrow
            MDFloatLayout:
                MDIconButton:
                    icon: "arrow-left"
                    pos_hint: {"top": 1, "x": 0} # Positioned top-left
                    on_release: app.root.ids.screen_manager.current = 'login_screen' # Go back to login

            MDLabel:
                text: "Two-Factor Authentication"
                halign: 'center'
                font_style: 'H5'
                adaptive_height: True

            MDLabel:
                id: info_label
                text: f"Your account is protected. Please enter your password."
                halign: 'center'
                adaptive_height: True
                theme_text_color: "Secondary"

            MDTextField:
                id: password_field
                hint_text: "Password"
                password: True
                halign: "center"

            MDRaisedButton:
                text: "SIGN IN"
                pos_hint: {'center_x': 0.5}
                on_release: root.verify_password()

    MDSpinner:
        id: spinner
        size_hint: None, None
        size: dp(46), dp(46)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        active: False
