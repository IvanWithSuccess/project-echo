<CodeVerificationScreen>:
    name: "code_verification_screen"

    FloatLayout:

        # 1. The back button
        Button:
            text: "< Back"
            size_hint: None, None
            size: dp(100), dp(48)
            pos_hint: {"top": 0.98, "x": 0.02}
            on_release: app.root.ids.screen_manager.current = 'login_screen'
            background_color: (0, 0, 0, 0) # Transparent
            color: (0.1, 0.5, 0.8, 1) # Blue text to indicate it's a link

        # 2. The centered content block
        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            width: "500dp"
            height: self.minimum_height
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: "20dp"

            Label:
                text: "Enter Code"
                halign: 'center'
                font_size: '22sp'
                bold: True
                color: (0, 0, 0, 1)
                size_hint_y: None
                height: self.texture_size[1]

            Label:
                id: info_label
                text: f"Enter the code sent to {app.phone_to_verify}"
                halign: 'center'
                color: (0.5, 0.5, 0.5, 1) # Gray color
                size_hint_y: None
                height: self.texture_size[1]

            TextInput:
                id: code_field
                hint_text: "Confirmation Code"
                halign: "center"
                multiline: False
                size_hint_y: None
                height: dp(48)
                padding: [dp(10), (dp(48) - self.font_size) / 2]

            Button:
                text: "CONFIRM"
                size_hint_y: None
                height: dp(48)
                background_color: (0.1, 0.5, 0.8, 1) # Blue
                color: (1, 1, 1, 1) # White text
                pos_hint: {'center_x': 0.5}
                on_release: root.verify_code()

            Label:
                id: spinner_label
                text: ""
                color: (0,0,0,1)
                size_hint_y: None
                height: self.texture_size[1]

